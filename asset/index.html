<!DOCTYPE html>
<html lang="en">
<head>
<title>YoMo Example</title>
<script type="text/javascript">
window.onload = function () {
    if (window["WebSocket"]) {
        connect();
    } else {
        alert("Your browser does not support WebSockets.");
    }
};

function updateCount(item) {
    document.getElementById("count").innerHTML = item;
};

function connect() {
  var ws = new WebSocket("wss://" + document.location.host + "/v3/ws");
  ws.onmessage = function (e) {
    if (e.data) {
      const data = JSON.parse(e.data);
      updateCount(data.noise);
    }
  };

  ws.onclose = function(e) {
    console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
    setTimeout(function() {
      connect();
    }, 1000);
  };

  ws.onerror = function(err) {
    console.error('Socket encountered error: ', err.message, 'Closing socket');
    ws.close();
  };
}
</script>
<style type="text/css">
html {
    overflow: hidden;
}

body {
    overflow: hidden;
    padding: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    font-family: Arial, Helvetica, sans-serif;
}

#noise {
    font-size: 36px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    min-height: 100vh;
}

#count {
    font-weight: bolder;
    color: green;
}

</style>
</head>
<body>
<div id="noise">Real-time noise level: <span id="count">0</span></div>
</body>
</html>